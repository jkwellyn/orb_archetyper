#!/bin/sh
SOURCE_DIR=`pwd`

#Begin
echo "*************************************"
echo "Running build script..."
echo "PWD :"$SOURCE_DIR
#echo all args passed to script
echo "Build args: $1 $2"
main(){
  echo "*************************************"
  startTime=$(date +%s)

  #no need to rvm use; project comes with a .rvmrc that sets the ruby version!
  bundle install --path vendor/bundle
  bundle exec rubocop

  #rspec it
  #TODO: your rpsec tests go here!

  #generate TODO/FIXME/other annotations report
  bundle exec rake notes:generate_annotations_report

  endTime=$(date +%s)
  timeDifference=$(( $endTime - $startTime ))

  echo "Execution time :" $timeDifference
  echo "Finished."
}
#RUN
main