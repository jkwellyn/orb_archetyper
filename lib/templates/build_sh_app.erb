#!/bin/sh
SOURCE_DIR=`pwd`

# Tell bash that we want the whole script to fail if any part fails.
set -e

#Begin
echo "*************************************"
echo "Running build script..."
echo "PWD :"$SOURCE_DIR
#echo all args passed to script
echo "Build args: $1 $2"
main(){
  echo "*************************************"
  startTime=$(date +%s)

  # No need to rvm use; project comes with a .rvmrc that sets the ruby version!
  bundle install --path vendor/bundle
  bundle exec rake rubocop

  # Rspec it
  #TODO: your rpsec tests go here!

  # Generate TODO/FIXME/other annotations report.
  bundle exec rake notes:generate_annotations_report

  endTime=$(date +%s)
  timeDifference=$(( $endTime - $startTime ))

  echo "Execution time :" $timeDifference
  echo "Finished."
}
#RUN
main
